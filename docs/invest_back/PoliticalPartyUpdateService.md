# PoliticalPartyUpdateServices設計書

## package

未定

## 目的

政党情報を更新すること

## extends,implements

(パッケージ未定)TemplatePoliticianBalancesheetService

## メソッド

### 1. practice

- 引数:ビジネス処理に必要な情報Dto
- 返り値：正常に処理された結果`true`を返却すること。ロールバック処理のため、異常な場合は例外をControllerに投げること

## Serviceにおける処理

- 引数として渡された、編集対象データから変更前idを取得すること
- 編集対象データに、新しいid:PRIMARY KEYが自動で振番されるよう`0`を設定すること
- 編集対象データの最新区分を`1:最新`である、と実装として明示的にマークすること。
- 変更データから編集されたデータ上書きされたデータを新規データとして挿入すること
- 取得した変更前idを用いて、変更前データの最新区分を`0:最新ではない`とマークすること
- 業務上の理由で政党紐づき情報が記録されている、[政党支部の紐づき更新作業](./#)を行うこと
- ログ記録Dtoである`LogContentDto`を呼び出し編集内容を設定すること
- 政党データが変更されたことを`super.writeLog(logContentDto)`を呼び出し、ログを記録すること
- Controllerに処理した結果：正常を返却すること。
- 異常が発生した場合は例外を投げてControllerのメソッドに付与した`@Transactional`でロールバック処理を行うこと

## フローチャート

分岐がないため省略
