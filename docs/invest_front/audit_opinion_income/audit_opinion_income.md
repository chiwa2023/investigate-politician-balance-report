# 監査意見入力(収入)【表示画面】設計書

## 状態：仕様未確定(実装不可)

## 1.目的

個別の仕分けに対して監査意見を付記する(収入項目)

## 2. 構成コンポーネント

1. 独自フィールド1
2. [収入データ表示コンポーネント最新データ参照用](../../common/front/edit_balancesheet_income/edit_balancesheet_income.md)
3. [収入データ表示コンポーネント選択データ参照用](../../common/front/edit_balancesheet_income/edit_balancesheet_income.md)
4. 独自フィールド2
5. [収入データ表示コンポーネント意見付記用](../../common/front/edit_balancesheet_income/edit_balancesheet_income.md)

### 2.1 繰り返し項目

なし

## 3. 画面イメージ

### 3.1 画面イメージ

![監査意見付記収入](image/監査意見付記収入.drawio.png)

### 3.2 画面イメージ(項番)

![監査意見付記収入](image/監査意見付記収入.drawio.png)

## 4. フィールド要素一覧

| 番号 |                    論理名                    |          タイプ          | 活性／表示 |                                       内容                                       |
| ---- | -------------------------------------------- | ------------------------ | ---------- | -------------------------------------------------------------------------------- |
| 1    | 書証同一識別コード                           | インプットテキスト       | 非活性     | データに結び付く書証の同一識別コードを表示すること                               |
| 1    | 書証タイプ同一識別コード                     | インプットテキスト       | 非活性     | データに結び付く書証タイプの同一識別コードを表示すること                         |
| 1    | 書証タイプ名称                               | インプットテキスト       | 非活性     | データに結び付く書証タイプの名称を表示すること                                   |
| 1    | 項目行数                                     | インプットテキスト       | 非活性     | 表示しているデータが一つの書証内に複数含まれている時、何項目か順番を表示すること |
| 1    | 収入データ処理履歴一覧                       | テーブル                 | 表示       | 履歴データが一覧されていること                                                   |
| 1    | 収入データ表示コンポーネント最新データ参照用 | コンポーネント           | 表示       | 履歴の中で最新データが表示されていること                                         |
| 1    | 収入データ表示コンポーネント指定データ参照用 | コンポーネント           | 表示       | 履歴の中からユーザから選択されたが表示されていること                             |
| 1    | 過去意見付記人数                             | インプットテキスト(数字) | 非活性     | 過去に意見付記がなされたオンブズマンの人数+1の数を表示すること                   |
| 1    | 意見支持選択                                 | セレクトボックス         | 活性       | 履歴の中にすでに妥当な処理があり、その処理へ支持することの表明を受け付けること   |
| 1    | 意見付記詳細エリア                           | テキストエリア           | 活性       | 意見付記の詳細を記載すること                                                     |
| 1    | 収入データ表示コンポーネント具体処理入力用   | コンポーネント           | 表示       | 履歴の中からユーザから選択されたが表示されていること                             |

### 4.1 収入データ処理履歴一覧テーブル

| 番号 |     論理名     |    タイプ    | 活性／表示 |                                        内容                                        |
| ---- | -------------- | ------------ | ---------- | ---------------------------------------------------------------------------------- |
| 1    | 更新日付       | ラベル       | 表示       | このデータを処理したタイムスタンプを表示すること                                   |
| 1    | 作業者         | ラベル       | 表示       | このデータを処理したユーザの団体における役割を表示すること                         |
| 1    | 動作内容       | ラベル       | 表示       | 初回登録などの処理区分名称を表示すること                                           |
| 1    | 掲載内容       | ラベル       | 表示       | タスク計上、報告対象外などの報告区分名称を表示すること                             |
| 1    | 摘要           | ラベル       | 表示       | このデータに紐づく、書証の摘要を表示すること                                       |
| 1    | 発生日         | ラベル       | 表示       | このデータの発生日を表示すること                                                   |
| 1    | 金額           | ラベル       | 表示       | このデータの取引金額を表示すること                                                 |
| 1    | 仕訳項目       | ラベル       | 表示       | このデータの仕訳区分名称と仕訳項目枝区分名称を定めたフォーマット内容で表示すること |
| 1    | 意見付記       | ラベル       | 表示       | 意見付記の最初のＸ文字(未定)までを表示すること                                     |
| 1    | 参照データ選択 | ラジオボタン | 活性       | 比較したいデータの入力を受け付けること                                             |

### 4.2 動作内容

 |   論理名   |  値  |   テキスト   |
 | ---------- | ---: | ------------ |
 | 初回登録   |    1 | 論理名に同じ |
 | データ編集 |   11 | 論理名に同じ |
 | 意見付記   |   21 | 論理名に同じ |

### 4.3 支持意見選択

 |    論理名    |  値  |   テキスト   |
 | ------------ | ---: | ------------ |
 | 代表者       |    1 | 論理名に同じ |
 | 会計責任者   |   11 | 論理名に同じ |
 | 事務担当者1  |   21 | 論理名に同じ |
 | 事務担当者2  |   22 | 論理名に同じ |
 | 事務担当者3  |   23 | 論理名に同じ |
 | 意見詳細入力 |   99 | 論理名に同じ |

## 5.アクション一覧

| 番号 |      論理名      |     タイプ     | 活性／表示 |                     内容                     |
| ---- | ---------------- | -------------- | ---------- | -------------------------------------------- |
| 1    | 書証を参照ボタン | ボタン         | 活性       | 押下時：書証表示コンポーネントを表示すること |
| 1    | 意見支持選択     | セレクトボタン | 活性       | 下記詳細参照                                 |
| 1    | キャンセル       | ボタン         | 活性       | 押下時：入力内容を破棄すること。             |
| 1    | 保存             | ボタン         | 活性       | 押下時：入力内容を保存すること。             |

### 5.1 意見支持選択セレクトボタン

- `意見詳細入力`選択時、支出データ表示コンポーネント具体処理入力用を活性で表示すること
- 意見詳細入力以外を選択された場合は、支出データ表示コンポーネント具体処理入力用を非表示すること

## 6. 監査意見付記インターフェイス

AuditIncomeOpinionInterface

|          論理名          |        論理名        |             型              |                              説明(例)                               |
| ------------------------ | -------------------- | --------------------------- | ------------------------------------------------------------------- |
| 書証Id                   | shoshouId            | String                      | 読み込みした書証Id。例示：「111-20221101-333」                      |
| 書証識別コード           | shoshouHistroyCode   | Long                        | 変更した際に同一意味の書証であることを識別するコード。例示：「333」 |
| 書証区分                 | shoshouKbn           | String                      | 書証を区分する。書証アップロード機能参照                            |
| 支持意見団体役割コード   | opinionCode          | Integer                     | 支持したい意見が存在する場合、団体内での役割を識別するコード        |
| 支持ユーザId             | userId               | Long                        | ユーザを識別する一意のId                                            |
| 支持ユーザ同一識別コード | uerCode              | Long                        | ユーザを変更履歴にかかわらず同一識別するコード                      |
| 支持ユーザ名称           | userName             | Long                        | ユーザ名称                                                          |
| データ対象項目           | itemNumber           | Integer                     | このデータの書証における項番(順番)                                  |
| 具体的入力               | incomeDirectTeaching | BalancesheetIncomeInterface | オンブズマンによる具体的な仕訳入力                                  |

### 6.1 監査意見付記過去履歴インターフェイス

IncomeEditHistoryInterface

 |         論理名         |       論理名       |                  型                  |               説明(例)               |
 | ---------------------- | ------------------ | ------------------------------------ | ------------------------------------ |
 | 最新収支入力データ     | outcomeDataNew     | BalancesheetIncomeInterface         | 最新の収支報告書支出データ           |
 | 最新以外収支入力データ | listOutcomeHistory | List\<BalancesheetIncomeInterface\> | 最新以外の収支報告書支出データリスト |

BalancesheetIncomeInterfaceは[収入データ表示コンポーネントを](../../common/front/edit_balancesheet_income/edit_balancesheet_income.md)参照

## 7. 連携

子画面から`computed`を設定されたAuditOpinionIncomeInterfaceの変更状態を常に受信すること
