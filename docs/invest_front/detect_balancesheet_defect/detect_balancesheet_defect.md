# 収支報告書欠損検出【表示画面】設計書

## 状態：仕様未確定(実装不可)

## 1.目的

政治資金収支報告書ですべての形式で閲覧ができない年がないか、比較し検出する

## 2. 構成コンポーネント

1. 独自フィールド
2. [収支報告書履歴表示年単位コンポーネント](../../common/front/vew_balancesheet_all_year/vew_balancesheet_all_year.md)

### 2.1 繰り返し項目

なし

## 3. 画面イメージ

### 3.1 画面イメージ

![収支報告書欠損検出](image/収支報告書欠損検出.drawio.png)

### 3.2 画面イメージ(項番)

![収支報告書欠損検出項番](image/収支報告書欠損検出項番.drawio.png)

## 4. フィールド要素一覧

| 番号 |        論理名        |       タイプ       | 活性／表示 |                                           内容                                           |
| ---- | -------------------- | ------------------ | ---------- | ---------------------------------------------------------------------------------------- |
| 1    | 政治団体コード       | インプットテキスト | 非活性     | 政治団体コードを表示すること                                                             |
| 1    | 政治団体名称         | インプットテキスト | 非活性     | 政治団体名称を表示すること。                                                             |
| 1    | 政治団体指定ボタン   | ボタン             | 活性       | 政治団体を検索し、指定するコンポーネントを表示すること。                                 |
| 1    | 確認期間開始年       | インプットテキスト | 活性       | 検索条件開始年の入力を受け付けること                                                     |
| 1    | 確認期間終了年       | インプットテキスト | 活性       | 検索条件終了年の入力を受け付けること                                                     |
| 1    | 検索                 | ボタン             | 活性       | 押下時：政治団体と、指定期間に合致する政治資金収支報告書を閲覧できる手段を一覧すること。 |
| 1    | 検索結果表示テーブル | テーブル           | －         | 検索結果を表示すること                                                                   |

### 4.1 検索結果表示テーブル

| 番号 |          論理名          | タイプ |  活性／表示  |                                                   内容                                                   |
| ---- | ------------------------ | ------ | ------------ | -------------------------------------------------------------------------------------------------------- |
| 1    | 提出年                   | ボタン | 活性         | 該当する提出年の収支報告書履歴表示年単位コンポーネントを表示すること                                     |
| 1    | 政治団体名称             | ラベル | 表示         | 政治団体名称を表示すること。                                                                             |
| 1    | 提出回数                 | ラベル | 表示         | 政治資金収支報告書の公式提出回数を表示すること。                                                         |
| 1    | システム登録リンク       | リンク | 活性／非表示 | **最新の**このシステムに保存されている政治資金収支報告書をシステム独自の形式で表示すること。             |
| 1    | 提出公式サイト登録リンク | リンク | 活性／非表示 | **最新の**提出された選挙管理委員会の名称を表示テキストとし、資料への直接リンクURLを表示すること          |
| 1    | 公式非表示ラベル         | ラベル | ラベル       | **最新の**リンクの登録があっても保存期間が経過し、リンク切れの可能性がある場合には「終了」と表示すること |
| 1    | 外部リンク               | リンク | 活性／非表示 | **最新の**登録された表示テキスト、入力された資料への直接リンクを表示すること                             |

## 5. アクション一覧

| 番号 | 論理名 | タイプ | 活性／表示 |                                           内容                                           |
| ---- | ------ | ------ | ---------- | ---------------------------------------------------------------------------------------- |
| 1    | 検索   | ボタン | 活性       | 押下時：政治団体と、指定期間に合致する政治資金収支報告書を閲覧できる手段を一覧すること。 |
| 1    | 閉じる | ボタン | 活性       | 押下時：この表示画面を非表示にすること                                                   |

## 6. インターフェイス

### 6.1 欠損検出検索条件インターフェイス

SearchConditionDetectDefectInterface

※このインターフェイスは使途報告書でも使用する予定

 |         論理名         |         論理名          |   型    |                   説明(例)                   |
 | ---------------------- | ----------------------- | ------- | -------------------------------------------- |
 | 政治団体Id             | politicOrgnaizationId   | Long    | 政治家団体を識別する一意のId                 |
 | 政治団体同一識別コード | politicOrgnaizationCode | Long    | 履歴にかかわらず政治家団体を識別する一意のId |
 | 政治団体名称           | politicOrgnaizationName | String  | 政治家団体名称                               |
 | 検索条件開始年         | conditionStartYear      | Integer | 検索条件として指定する開始西暦年             |
 | 検索条件終了年         | conditionEndYear        | Integer | 検索条件として指定する終了西暦年             |

### 6.2 欠損検出検索結果インターフェイス

DetectDefectSearchResultInterface

※このインターフェイスは使途報告書でも使用する予定

 |                   論理名                   |           論理名           |                              型                               |                                                                                                説明(例)                                                                                                 |
 | ------------------------------------------ | -------------------------- | ------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
 | 政治団体Id                                 | politicOrgnaizationId      | Long                                                          | 政治家団体を識別する一意のId                                                                                                                                                                            |
 | 政治団体同一識別コード                     | politicOrgnaizationCode    | Integer                                                       | 履歴にかかわらず政治家団体を識別する一意のId                                                                                                                                                            |
 | 政治団体名称                               | politicOrgnaizationName    | String                                                        | 政治家団体名称                                                                                                                                                                                          |
 | 政治資金収支報告書Code                     | balancesheetCode           | Long                                                          | 政治資金収支報告書を表示するページへのクエリパラメータとなるId                                                                                                                                          |
 | 最新報告書提出選挙管理委員会同一識別コード | newestSubmissionCode       | Integer                                                       | 政治資金収支報告書が提出された選挙管理委員会同一識別コード                                                                                                                                              |
 | 最新報告書提出選挙管理委員会名称           | newestSubmissionName       | String                                                        | 政治資金収支報告書が提出された選挙管理委員会名称                                                                                                                                                        |
 | 最新報告書提出選挙管理委員会リンク         | newestSubmissionUrl        | String                                                        | 提出された選挙管理委員会公式サイト内の政治資金収支報告書への直接リンク                                                                                                                                  |
 | 最新非公式データページタイトル             | newestNotOfiicialPageTitle | String                                                        | 収支報告書が非公式サイトに保存された場合、掲載されたページタイトル                                                                                                                                      |
 | 最新非公式データリンク                     | newestNotOfiicialUrl       | String                                                        | 収支報告書が非公式サイトに保存された場合、資料への直接リンク                                                                                                                                            |
 | 選挙管理委員会提出収支報告書データリスト   | mapSubmissionPublish       | Map<Integer,Map\<Integer,PublishDirectLinkInterface\>\>       | 公式サイト(提出選挙管理委員会)の政治資金収支報告書へのリンク情報を1.提出年、2.提出回数をキーとして呼び出すことができるようMapに格納。格納される情報は掲載されたページタイトルとリンクの組み合わせリスト |
 | 非公式データリスト                         | mapNotOfiicialSiteLink     | Map<Integer,Map\<Integer,List\<PublishDirectLinkInterface\>\> | 非公式サイトへのリンク情報を1.提出年、2.提出回数をキーとして呼び出すことができるようMapに格納。掲載されたページタイトルとリンクの組み合わせリスト                                                       |

### 6.3 発行物直接リンクインターフェイス

PublishDirectLinkInterface

※このインターフェイスは使途報告書でも使用する予定

 |              論理名              |         論理名         |   型    |                          説明(例)                          |
 | -------------------------------- | ---------------------- | ------- | ---------------------------------------------------------- |
 | 提出回数                         | submissionTimes        | Integer | 当該収支報告書が修正があり、何回目の提出にあたるか         |
 | 提出選挙管理委員会Id             | electionCommissionId   | Long    | 提出選挙管理委員会Id                                       |
 | 提出選挙管理委員会同一識別コード | electionCommissionCode | Long    | 提出選挙管理委員会を変更履歴にかかわらず同一識別するコード |
 | 提出選挙管理委員会名称           | electionCommissionName | String  | 提出選挙管理委員会名称                                     |
 | ページタイトル                   | sitePageTitle          | String  | 収支報告書が掲載されたページタイトル                       |
 | 収支報告書直接リンク             | siteUrl                | String  | 収支報告書資料への直接リンク                               |

非公式サイト用の情報入力はページタイトルと収支報告書直接リンクに直接入力される
公式サイト用の場合ページタイトルにデータベースによる永続化の前に提出選挙管理委員会名称に複写されること

## 7. 連携

現時点では親子関係にあるコンポーネントは存在しない
